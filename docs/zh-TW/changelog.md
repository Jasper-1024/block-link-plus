# 更新日誌

Block Link Plus 的版本更新歷史和新功能介紹。

## 未發佈

## v1.8.0 (目前版本)

- 內嵌編輯：遷移到原生 leaf 引擎（移植自 sync-embeds，Live Preview 更穩定）
- 移除舊版 `!![[...]]` 嵌入語法，請改用 `![[...]]`
- 多行塊：改進 `^id-id` 範圍建立（安全時在行尾內嵌插入結束標記，否則獨佔一行插入）
- 修正：多塊模式以「塊」（段落/清單項）為單位，而非逐行（#22/#27）
- 修正：清單項有續行時，block id 會插在該項最後一行（避免 Obsidian 找不到）
- 修正：選區在單個清單項內時，範圍 marker 不再擴到整個 list
- 修正：`^id-id` 範圍嵌入渲染一致（即使關閉內嵌編輯）
- 修正：閱讀模式後處理不再導致內容被清空（#29）
- 新增：升級後彈出一次更新說明（What's New）

## v1.7.6

- 修正時間線連結比對，支援完整路徑連結格式（如 `[[Task/path/file.md|alias]]`）
- 改進連結比對邏輯，採用雙重策略：路徑解析 + basename 比對
- 保持對現有短格式連結的向後相容性

## v1.7.5

- 增強多行塊處理，透過在 markdown 處理和流編輯器中提取實際連結而不使用別名
- 更新正則表達式模式以支援別名和非別名格式
- 修正設定中塊 ID 前綴的拼字錯誤，更新中文和繁體中文本地化檔案
- 新增複製塊作為可編輯嵌入的新命令
- 更新 UIMultilineBlock，根據 showEditIcon 屬性有條件地建立行點擊處理器

## v1.5.3

- 改進 **時間線** 輸出格式，提高可讀性和組織性
- 為每個檔案群組新增檔案連結作為進入點
- 在檔案群組之間新增分隔符，內容行之間新增空行
- 保留使用者對嵌入連結的自訂修改
- 更新文件，新增新格式範例
- 修正時間線篩選中的連結比對問題

## v1.5.0

- 為時間線功能新增 **除錯模式**，用於排查篩選問題
- 修正時間線中的章節提取，以正確比對連結
- 透過基本名稱比對改進時間線篩選的準確性
- 新增基於雜湊的最佳化，防止不必要的檔案更新
- 修正時間線功能中的各種邊緣情況

## v1.4.0

- 新增 **嵌入塊編輯** 功能，提供無縫的內嵌編輯體驗
- 新增 **時間線** 功能 (`blp-timeline`)，可動態查詢和聚合筆記中的章節
- 將專案遷移到標準化結構，原始程式碼移至 `src` 目錄
- 將流編輯器等主要元件重構為獨立模組，以提高可維護性

## v1.3.0

- 新增時間章節功能，用於插入時間戳記作為標題
- 新增時間章節的自動標題層級確定
- 新增對日記筆記的特殊處理，支援自訂模式比對
- 新增在預覽模式下將時間章節顯示為純文字的選項
- 改進標題分析，提供更好的層級檢測
- 修正插入元素後的游標定位問題

## v1.2.4

- 新增標題分析中邊緣情況的驗證，提高穩定性
- 增強 analyzeHeadings 函數的錯誤處理
- 修正 start_line 和 end_line 同時為零時的潛在問題

## v1.2.3

- 改進多行塊處理，特別是對清單項目的處理
- 增強多行塊的別名產生功能
- 新增可設定的塊連結複製通知
- 修正清單塊的 ID 處理和位置問題
- 改進選取文字作為別名的處理

## v1.2.0

- 重新整理設定選單結構，提升使用體驗
- 修正包含標題的文字塊處理問題
- 新增實驗性選項：heading_id_newline，用於控制標題塊 ID 的換行行為
- 改進設定文字的清晰度和組織

## v1.1.3

- 修正清單項目的塊 ID 處理問題
- 最佳化清單類型塊的 ID 插入位置
- 改進清單塊的處理邏輯

## v1.1.2

- 新增塊連結別名類型：選取文字
- 改進標題塊的別名處理
- 修正單行塊的別名產生
- 增強別名類型設定選項
- 改進文件和設定說明

## v1.1.0

- 新增 Obsidian URI 連結支援
- 新增可自訂的塊連結別名類型：
  - 塊內容的前 x 個字元
  - 最近的標題
- 改進命令和選單文字的清晰度
- 修正命令面板和右鍵選單功能的一致性

## 版本規劃

### 即將到來的功能
- 更多時間線篩選選項
- 增強的多行塊格式支援
- 改進的國際化支援

### 已知問題
- 某些複雜巢狀結構的多行塊處理
- 大型文件中的效能最佳化

## 貢獻指南

如果您發現問題或有新功能建議，請：

1. 查看 [GitHub Issues](https://github.com/Jasper-1024/obsidian-block-link-plus/issues)
2. 提交詳細的問題報告或功能請求
3. 參與社群討論和測試
