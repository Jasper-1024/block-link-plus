# 更新日志

Block Link Plus 的版本更新历史和新功能介绍。

## 未发布

## v2.0.0 (当前版本)

- 新增：Outliner —— 对启用范围内的文件提供类 Logseq 的大纲视图；每个列表项都是一个可稳定引用的 block
- 新增：`blp-view`（Query/View）—— 基于 Dataview 的查询/分组/渲染（支持 `embed-list` / `table`；可选 `materialize` 写回）
- 改进：启用范围模型统一（设置中的启用文件夹/文件 + 文件 frontmatter `blp_outliner: true/false`）
- 移除：Timeline / Time section 等旧能力（如仍需要，请固定使用旧版本）

## v1.8.1

- 修复：内联编辑中，引用列表项 block id（如 `#^123`）时会保留其子项
- 修复：内联编辑中不再显示嵌入反向链接面板（“链接当前文件”）

## v1.8.0

- 内联编辑：迁移到原生 leaf 引擎（移植自 sync-embeds，Live Preview 更稳定）
- 移除旧版 `!![[...]]` 嵌入语法，请改用 `![[...]]`
- 多行块：改进 `^id-id` 范围创建（安全时行尾内联插入结束标记，否则独占一行插入）
- 修复：多块模式按“块”（段落/列表项）工作，而非按单行（#22/#27）
- 修复：列表项有续行时，block id 插入在该列表项最后一行（避免 Obsidian 找不到）
- 修复：选区在单个列表项内时，范围 marker 不再扩到整个 list
- 修复：`^id-id` 范围嵌入渲染一致（即使关闭内联编辑）
- 修复：阅读模式后处理不再导致内容被清空（#29）
- 新增：升级后弹出一次更新说明（What's New）

## v1.7.6

- 修复时间线链接匹配，支持完整路径链接格式（如 `[[Task/path/file.md|alias]]`）
- 改进链接匹配逻辑，采用双重策略：路径解析 + basename 匹配
- 保持对现有短格式链接的向后兼容性

## v1.7.5

- 增强多行块处理，通过在markdown处理和流编辑器中提取实际链接而不使用别名
- 更新正则表达式模式以支持别名和非别名格式
- 修复设置中块ID前缀的拼写错误，更新中文和繁体中文本地化文件
- 添加复制块作为可编辑嵌入的新命令
- 更新UIMultilineBlock，根据showEditIcon属性有条件地创建行点击处理器

## v1.5.3

- 改进 **时间线** 输出格式，提高可读性和组织性
- 为每个文件组添加文件链接作为入口点
- 在文件组之间添加分隔符，内容行之间添加空行
- 保留用户对嵌入链接的自定义修改
- 更新文档，添加新格式示例
- 修复时间线过滤中的链接匹配问题

## v1.5.0

- 为时间线功能添加 **调试模式**，用于排查过滤问题
- 修复时间线中的章节提取，以正确匹配链接
- 通过基本名称匹配改进时间线过滤的准确性
- 添加基于哈希的优化，防止不必要的文件更新
- 修复时间线功能中的各种边缘情况

## v1.4.0

- 新增 **嵌入块编辑** 功能，提供无缝的内联编辑体验
- 新增 **时间线** 功能 (`blp-timeline`)，可动态查询和聚合笔记中的章节
- 将项目迁移到标准化结构，源代码移至 `src` 目录
- 将流编辑器等主要组件重构为独立模块，以提高可维护性

## v1.3.0

- 添加时间章节功能，用于插入时间戳作为标题
- 添加时间章节的自动标题级别确定
- 添加对日记笔记的特殊处理，支持自定义模式匹配
- 添加在预览模式下将时间章节显示为纯文本的选项
- 改进标题分析，提供更好的级别检测
- 修复插入元素后的光标定位问题

## v1.2.4

- 添加标题分析中边缘情况的验证，提高稳定性
- 增强 analyzeHeadings 函数的错误处理
- 修复 start_line 和 end_line 同时为零时的潜在问题

## v1.2.3

- 改进多行块处理，特别是对列表项的处理
- 增强多行块的别名生成功能
- 添加可配置的块链接复制通知
- 修复列表块的ID处理和位置问题
- 改进选中文本作为别名的处理

## v1.2.0

- 重新整理设置菜单结构，提升使用体验
- 修复包含标题的文本块处理问题
- 新增实验性选项：heading_id_newline，用于控制标题块ID的换行行为
- 改进设置文本的清晰度和组织

## v1.1.3

- 修复列表项的块ID处理问题
- 优化列表类型块的ID插入位置
- 改进列表块的处理逻辑

## v1.1.2

- 新增块链接别名类型：选中文本
- 改进标题块的别名处理
- 修复单行块的别名生成
- 增强别名类型配置选项
- 改进文档和设置说明

## v1.1.0

- 添加 Obsidian URI 链接支持
- 添加可自定义的块链接别名类型：
  - 块内容的前 x 个字符
  - 最近的标题
- 改进命令和菜单文本的清晰度
- 修复命令面板和右键菜单功能的一致性

## 贡献指南

如果您发现问题或有新功能建议，请：

1. 查看 [GitHub Issues](https://github.com/Jasper-1024/obsidian-block-link-plus/issues)
2. 提交详细的问题报告或功能请求
3. 参与社区讨论和测试
